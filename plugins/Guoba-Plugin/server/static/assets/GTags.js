var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,s=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&r(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&r(e,n,t[n]);return e},i=(e,o)=>t(e,n(o));import{a as u,b as p,p as f,r as c,c as d,w as m,t as b,e as y,o as g,f as h,F as v,h as j,i as w,j as O,k as C,l as _,m as P,n as k,q as V,u as F}from"./index.js";import"./index2.js";/* empty css      *//* empty css                                                      */import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";const x=p({name:"GTags",inheritAttrs:!1,props:{value:f.array.def((()=>[])),allowAdd:f.bool.def(!1),allowDel:f.bool.def(!1),showPrompt:f.bool.def(!1),promptProps:f.object.def((()=>({}))),valueFormatter:f.oneOfType([f.func,f.string])},emits:["change"],setup(e,{emit:t}){const{createPrompt:n}=F(),o=c(),a=d({tags:[],inputVisible:!1,inputValue:""});function l(){const e=a.inputValue;let t=a.tags;e&&-1===t.indexOf(e)&&(t=[...t,r(e)]),Object.assign(a,{tags:t,inputVisible:!1,inputValue:""}),u()}function r(t){if(e.valueFormatter){if("function"!=typeof e.valueFormatter)return new Function(`return ${e.valueFormatter}`)()(t);e.valueFormatter(t)}return t}function u(){t("change",a.tags)}return m((()=>e.value),(e=>{a.tags=null==e?[]:e}),{immediate:!0}),i(s({},b(a)),{handleClose:function(e){a.tags=a.tags.filter((t=>t!==e)),u()},showInput:function(){e.showPrompt?n(i(s({title:"添加",required:!0},e.promptProps),{onOk(e){a.inputValue=e,l()}})):(a.inputVisible=!0,V((()=>{o.value.focus()})))},handleInputConfirm:l,inputRef:o})}}),I=_(" 新增 ");var S=u(x,[["render",function(e,t,n,o,a,l){const r=y("a-tag"),s=y("a-tooltip"),i=y("a-input"),u=y("icon");return g(),h(v,null,[(g(!0),h(v,null,j(e.tags,(t=>(g(),h(v,{key:t},[t.length>20?(g(),w(s,{key:0,title:t},{default:O((()=>[C(r,{closable:"",onClose:n=>e.handleClose(t)},{default:O((()=>[_(P(`${t.slice(0,20)}...`),1)])),_:2},1032,["onClose"])])),_:2},1032,["title"])):(g(),w(r,{key:1,closable:"",onClose:n=>e.handleClose(t)},{default:O((()=>[_(P(t),1)])),_:2},1032,["onClose"]))],64)))),128)),e.inputVisible?(g(),w(i,{key:0,ref:"inputRef",value:e.inputValue,"onUpdate:value":t[0]||(t[0]=t=>e.inputValue=t),type:"text",size:"small",style:{width:"78px"},onBlur:e.handleInputConfirm,onKeyup:k(e.handleInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"])):(g(),w(r,{key:1,style:{background:"#fff","border-style":"dashed",cursor:"pointer"},onClick:e.showInput},{default:O((()=>[C(u,{icon:"ant-design:plus"}),I])),_:1},8,["onClick"]))],64)}]]);export{S as default};
