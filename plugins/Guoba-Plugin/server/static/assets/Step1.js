import{b as t,r as e,G as o,bx as s,o as r,i as a,j as i,bz as n,bg as m,a0 as p,a1 as l,x as u,bA as j,bB as d}from"./index.js";import{a as f}from"./hooks.js";import c from"./Step1-1.js";import v from"./Step1-2.js";import x from"./Step1-3.js";import _ from"./Step1-4.js";import{a as g}from"./common.js";import{l as h}from"./lodash.default.js";import"./BasicForm.js";import"./index5.js";import"./find.js";import"./_baseIteratee.js";import"./get.js";import"./index4.js";import"./index9.js";import"./useFormItem.js";/* empty css      */import"./transButton.js";import"./index2.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./upperFirst.js";import"./download.js";import"./index7.js";import"./index6.js";import"./uniqBy.js";/* empty css                                                      */import"./ModeBox.js";import"./StepBtn.js";import"./throttle.js";import"./merge.js";const y=t({__name:"Step1",setup(t){const{createMessage:y,createConfirm:S,createWarningModal:b}=d(),[,{models:w,stepStore:B}]=f({},{}),F=e(0),P=[c,v,x,_],k=o((()=>({onPrev:I,onNext:M})));function I(){let t=F.value-1;2===t&&"full"===w.value.mode&&t--,t<0?y.warn("已是第一步"):F.value=t}function M(){let t=F.value+1;if(2===t&&"full"===w.value.mode&&t++,t===P.length){S({title:"开始迁移",iconType:"warning",content:"你已完成所有的准备工作，请确认是否全部配置正确，并开始迁移吗？",okText:"开始迁移",onOk(){return t=this,e=null,o=function*(){yield s.post({url:"/v2-transfer/start",params:{config:h.omit(w.value,"jsPluginInfo")}});for(let t=0;t<3;t++){if(yield B.updateStatus(),0!==B.status.state)return;yield g(300)}b({title:"错误",content:"获取启动状态失败，请手动刷新页面重试"})},new Promise(((s,r)=>{var a=t=>{try{n(o.next(t))}catch(e){r(e)}},i=t=>{try{n(o.throw(t))}catch(e){r(e)}},n=t=>t.done?s(t.value):Promise.resolve(t.value).then(a,i);n((o=o.apply(t,e)).next())}));var t,e,o}})}else F.value=t}return(t,e)=>(r(),a(j,{name:"fade-slide",appear:""},{default:i((()=>[(r(),a(n,null,[(r(),a(m(P[F.value]),p(l(u(k))),null,16))],1024))])),_:1}))}});export{y as default};
