var e=(e,t,r)=>new Promise(((o,i)=>{var s=e=>{try{n(r.next(e))}catch(t){i(t)}},m=e=>{try{n(r.throw(e))}catch(t){i(t)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,m);n((r=r.apply(e,t)).next())}));import{b as t,bD as r,r as o,e as i,o as s,f as m,k as n,x as a,j as l,R as u,l as d,w as p,bB as c}from"./index.js";import{B as h}from"./BasicForm.js";import{u as j}from"./miao.data.js";import{j as f}from"./miao.api.js";import{l as b}from"./lodash.default.js";import"./index5.js";import"./find.js";import"./_baseIteratee.js";import"./get.js";import"./index4.js";import"./index9.js";import"./useFormItem.js";/* empty css      */import"./transButton.js";import"./index2.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./upperFirst.js";import"./download.js";import"./index7.js";import"./index6.js";import"./uniqBy.js";import"./base64Conver.js";import"./throttle.js";import"./merge.js";const g={key:0,style:{"text-align":"center"}},y=d("保存皮肤配置"),T=t({__name:"ThemeConfigForm",props:{model:Object,themeName:String,themeNames:Array,debugThemeName:String},emits:["update:model","update:debugThemeName"],setup(t,{emit:d}){const T=t,{createMessage:x}=c(),v=e=>e.debugTheme&&e.currentTheme,[w,{setFieldsValue:F,updateSchema:N,validate:B}]=r({schemas:[{field:"debugTheme",label:"调试皮肤",component:"Switch",bottomHelpMessage:"对已有皮肤进行实时调试（需要手动保存）"},{field:"currentTheme",label:"选择皮肤",component:"Select",show:({model:e})=>e.debugTheme,bottomHelpMessage:"若要新增或删除皮肤，请点击右上角的“皮肤”按钮。"},...j({show:({model:e})=>v(e)})],labelWidth:120,labelAlign:"right",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:19},showActionButtonGroup:!1,baseColProps:{span:24}}),C=o(!1);function S(t,r){return e(this,null,(function*(){w(t),yield function(){return e(this,null,(function*(){p((()=>T.themeNames),(t=>e(this,null,(function*(){Array.isArray(t)||(t=[]);let e=(t=t.filter((e=>"default"!==e))).map((e=>({label:e,value:e})));0===e.length&&(yield F({currentTheme:null})),yield N([{field:"currentTheme",componentProps:{options:e}}])}))),{deep:!0,immediate:!0})}))}(),yield function(t){return e(this,null,(function*(){yield F(T.model),p((()=>T.model),(()=>F(T.model)),{deep:!0}),p(t,(e=>{d("update:model",e),C.value=v(e);let t=C.value&&e.currentTheme||"";d("update:debugThemeName",t)}),{immediate:!0}),p((()=>t.debugTheme),((e,r)=>{!0!==e||r||(t.currentTheme=T.themeName||"")}),{immediate:!0})}))}(r)}))}function A(){return e(this,null,(function*(){let e=yield B(),t=b.omit(e,["debugTheme","currentTheme"]);yield f(e.currentTheme,t),x.success("保存成功~")}))}return(e,t)=>{const r=i("a-button");return s(),m("div",null,[n(a(h),{onRegister:S}),C.value?(s(),m("div",g,[n(r,{type:"primary",preIcon:"ant-design:save",onClick:A},{default:l((()=>[y])),_:1})])):u("",!0)])}}});export{T as default};
